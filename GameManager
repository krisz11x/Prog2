using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class GameManager : MonoBehaviour
{
    public Button StartButton;
    public Button DealButton;
    public Button StandButton;
    public Button betButton;

    public PlayerScript playerScript;
    public PlayerScript dealerScript;

    void Start()
    {
        StartButton.onClick.AddListener(() => StartClicked());
        //DealButton.onClick.AddListener(() => DealClicked());
        //StandButton.onClick.AddListener(() => StandClicked());
    }

    private void StartClicked()
    {
        GameObject.Find("Deck").GetComponent<DeckScript>().Shuffle();
        playerScript.StartHand();
        dealerScript.StartHand();
        
        
    }
}

    private void DealClicked()
    {
         if (playerScript.cardIndex <= 8)
        {
            playerScript.GetCard();
            scoreText.text = "Hand: " + playerScript.handValue.ToString();
            if (playerScript.handValue > 20) RoundOver();
        }
    }
    
    private void StandClicked()
    {
        HitDealer();          
    }


     private void HitDealer()
    {
        while (dealerScript.handValue < 17 && dealerScript.cardIndex < 8)
        {
            dealerScript.GetCard();
            dealerScoreText.text = "Hand: " + dealerScript.handValue.ToString();
        }

        RoundOver();
    }

}
